<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_bee</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1</depth>
  <persistent>0</persistent>
  <parentName>parent_hero</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>sp = 1.5

image_speed = 0.1

acel = true

gralha = 0

vol = 0

ang = 270

vida = 10

disx = 300
disy = 200
prox = 0

imgang = 0

if global.re {
    Estado = "inicio"
}
else {
    Estado = "preinicio"
}

tiro = false
gameover = false

alarm[4] = 60

x = view_xview + view_wview/2 + lengthdir_x(disx,ang)
y = view_yview + view_hview/2 + lengthdir_y(disy,ang)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>gameover = true
instance_create(0,0,obj_continue)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if Estado != "morto" {
    image_index = 0
    Estado = "atirando"


    var dist = point_distance(0,0,13,6);
    var direc = point_direction(0,0,13,6) + imgang;
    
    audio_play_sound(sfx_tiro,0,false)
    
    tiro = instance_create(x + lengthdir_x(dist,direc),y + lengthdir_y(dist,direc), obj_tiro_maior)
    tiro.direction = point_direction(x + lengthdir_x(dist,direc),y + lengthdir_y(dist,direc),parent_boss.x + 33, parent_boss.y + 48)
    tiro.image_angle = point_direction(x + lengthdir_x(dist,direc),y + lengthdir_y(dist,direc),parent_boss.x + 33, parent_boss.y + 48)


    alarm[3] = 60
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_alpha = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_alpha = 0.5
alarm[1] = 60
Estado = "movendo"
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>randomize();

if ang &gt; 360 {
    ang = 0
}
if ang &lt; -1 {
    ang = 360
}

switch Estado {

    case "inicio":
        if obj_boss.vida &gt;= 15 {
                fast = sp
                vol = 0
                Estado = "movendo"
        }
    break

    case "movendo":
    if parent_boss.x &lt; room_width/2 and parent_boss.y &lt; room_height/2 {
        scr_beemov(215,45)
    }
    if parent_boss.x &gt; room_width/2 and parent_boss.y &lt; room_height/2 {
        scr_beemov(135,315)
    }
    if parent_boss.x &lt; room_width/2 and parent_boss.y &gt; room_height/2 {
        scr_beemov(315,135)
    }
    if parent_boss.x &gt; room_width/2 and parent_boss.y &gt; room_height/2 {
        scr_beemov(45,215)
    }
    if collision_circle(x,y,100,obj_bola,true,false) and !collision_circle(x,y,100,obj_escudo,true,false) {
        fast = 0
        imgang = point_direction(x,y,parent_boss.x,parent_boss.y)
        escudo = instance_create(x + lengthdir_x(50,imgang),y + lengthdir_y(50,imgang),obj_escudo)
        escudo.image_angle = imgang
        escutrig = false
        audio_play_sound(sfx_escudo,0,false)
        Estado = "escudo"
    }
    break;
    
    case "escudo":
        escudo.alarm[0] = 180
        if !collision_circle(x,y,100,obj_bola,true,false) and escudo.image_index &gt; 6 {
            if irandom(9) &gt; 5 {
                var dist = point_distance(0,0,13,6);
                var direc = point_direction(0,0,13,6) + imgang;
                mira = instance_create(x + lengthdir_x(dist,direc),y + lengthdir_y(dist,direc),obj_mira)
                alarm[2] = 120
                Estado = "mirando"
            }
            else {
                vol = 0
                Estado = "movendo"
            }
        }
    break;
    
    case "dano":
    alarm[2] = -1
    break;
    
    case "mirando":
        var dist = point_distance(0,0,13,6);
        var direc = point_direction(0,0,13,6) + imgang;
        mira.x = x + lengthdir_x(dist,direc)
        mira.y = y + lengthdir_y(dist,direc)
    break;
    
    case "atirando":
    break;
    
    case "morto":
    if y &lt; 443 {
        gralha += 0.45
        y += gralha
    }
    else {
        y = 443
    }
    break;    

}

if obj_boss.Estado == "morto" {
    Estado = "parado"
}

if gameover {
    if keyboard_check_pressed(ord('R')) {room_restart()}
}

if vida &lt; 0 {
    vida = 0
}

if Estado != "morto" {
    x = view_xview + view_wview/2 + lengthdir_x(disx,ang)
    y = view_yview + view_hview/2 + lengthdir_y(disy,ang)
}



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bola">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (Estado = "movendo" or Estado = "atirando" or Estado = "escudo" or Estado = "mirando") and alarm[1] == -1 {
    fast = 0
    audio_play_sound(sfx_herohit, 1, false)
    if vida != 1 {
        alarm[0] = 30
        vida -= 1
        Estado = "dano" 
    }
    else {
        alarm[5] = 120
        vida -= 1
        scr_musicstops()
        Estado = "morto"
    }       
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_laser">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (Estado = "movendo" or Estado = "atirando") and alarm[1] == -1 {
    path_speed = 0
    audio_play_sound(sfx_herohit, 1, false)
    if vida != 1 {
        alarm[0] = 30
        vida -= 1
        Estado = "dano" 
    }
    else {
        alarm[5] = 120
        vida -= 1
        audio_stop_sound(mus_game)
        Estado = "morto"
    }       
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite_ext(sprite_index, image_index, x, y, image_xscale, 1, imgang, c_white, image_alpha)

switch Estado {

    case "movendo":
    image_speed = 0.1
    if point_direction(x,y,obj_boss.x, obj_boss.y) &gt; 90 and point_direction(x,y,obj_boss.x, obj_boss.y) &lt; 270 {
        image_xscale = -1
    }
    else {
        image_xscale = 1
    }
    sprite_index = spr_bee_andando
    if imgang &gt; 0 {
            imgang -= 5
        }
        else {
            imgang = 0
        }
    break;
    
    case "escudo":
    image_xscale = 1
    imgang = point_direction(x,y,parent_boss.x,parent_boss.y)
    sprite_index = spr_bee_andando
    break;
    
    case "mirando":
    image_xscale = 1
    imgang = point_direction(x,y,parent_boss.x,parent_boss.y)
    sprite_index = spr_bee_mirando
    break;
    
    case "dano":
    sprite_index = spr_bee_dano
    break;
    case "atirando":
    image_speed = 0.2
    //show_message(string(image_index) + " " + sprite_get_name(sprite_index))
    if !(image_index &lt; 2.8) {
        vol = 0
        Estado = "movendo"
    }
    else {
        sprite_index = spr_bee_atirando
    }

    imgang = point_direction(x,y,parent_boss.x,parent_boss.y)
    break;
    
    case "morto":
        sprite_index = spr_bee_morto
        if imgang &gt; 0 {
            imgang -= 5
        }
        else {
            imgang = 0
        }
    break;

}

draw_sprite(spr_beeicon, image_index, 56.5 + view_xview, 85 + view_yview)

draw_set_color(c_olive)
    draw_rectangle(50 + view_xview, 100 + view_yview, 60 + view_xview, 200 + view_yview, false)

draw_set_color(c_yellow)
    if vida &gt; 0 {
        draw_rectangle(50 + view_xview, 200 - vida*10 + view_yview, 60 + view_xview, 200 + view_yview, false)
    }
draw_set_color(c_white)
    for (i = 0; i &lt; 2; i += 1)
        draw_rectangle(50 - i + view_xview, 100 - i + view_yview, 60 + i + view_xview, 200 + i + view_yview, true)
        

        









</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
